(this["webpackJsonppetful-client"]=this["webpackJsonppetful-client"]||[]).push([[0],{22:function(e,t,n){e.exports=n(36)},23:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);n(23);var a=n(0),o=n.n(a),r=n(14),c=n.n(r),u=n(5),i=n(15),l=n(16),s=n(20),h=n(17),p=n(21);function m(e){return o.a.createElement("div",{className:"PetSquare"},o.a.createElement("img",{src:e.pet.imageURL,alt:"",height:"300px"}),o.a.createElement("p",null,"Name: ","".concat(e.pet.name)),o.a.createElement("p",null,"Age: ","".concat(e.pet.age)),o.a.createElement("p",null,"Breed: ","".concat(e.pet.breed)),o.a.createElement("p",null,"Description: ","".concat(e.pet.description)),o.a.createElement("p",null,"Story: ","".concat(e.pet.story)),o.a.createElement("button",{onClick:function(){return e.adoptButtonClicked(e.type)},disabled:!e.adoptable},"Adopt"))}function f(e){var t=e.people.map((function(e,t){return o.a.createElement("p",{key:t},e)}));return o.a.createElement("div",{className:"Queue"},o.a.createElement("h2",null,"Current Queue"),t)}var d=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_ADDRESS||"https://petful-api-ian.herokuapp.com",E={getCat:function(){return fetch("".concat(d,"/cats")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){return e})).catch((function(e){return console.error(e)}))},getDog:function(){return fetch("".concat(d,"/dogs")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){return e})).catch((function(e){return console.error(e)}))},getPeople:function(){return fetch("".concat(d,"/people")).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).then((function(e){return e})).catch((function(e){return console.error(e)}))},addPerson:function(e){return fetch("".concat(d,"/people"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({person:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){return console.error(e)}))},removePerson:function(){return fetch("".concat(d,"/people"),{method:"DELETE",headers:{"content-type":"application/json"}}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){return console.error(e)}))},dequeuePet:function(e){return fetch("".concat(d,"/pets"),{method:"DELETE",headers:{"content-type":"application/json"},body:JSON.stringify({type:e})}).then((function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))})).catch((function(e){return console.error(e)}))}},v=(n(28),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={cat:{},dog:{},people:[],userName:"",inLine:!1,atFront:!1,waiting:!1},n.adoptButtonClicked=function(e){E.dequeuePet(e).then((function(){E.getCat().then((function(e){n.setState({cat:e})})).catch((function(e){return n.setState({error:e})})),E.getDog().then((function(e){n.setState({dog:e})})).catch((function(e){return n.setState({error:e})}))})).then((function(){E.removePerson().then((function(){E.getPeople().then((function(e){n.setState({people:e,userName:"",inLine:!1,atFront:!1})})).catch((function(e){return n.setState({error:e})}))}))}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.getCat().then((function(t){e.setState({cat:t})})).catch((function(t){return e.setState({error:t})})),E.getDog().then((function(t){e.setState({dog:t})})).catch((function(t){return e.setState({error:t})})),E.getPeople().then((function(t){e.setState({people:t})})).catch((function(t){return e.setState({error:t})}))}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault(),E.addPerson(this.state.userName).then((function(e){t.setState({people:e,inLine:!0,atFront:!1,waiting:!0})})),this.moveQueue()}},{key:"changeUserName",value:function(e){this.setState({userName:e.target.value})}},{key:"moveQueue",value:function(){var e=this;this.interval=setInterval((function(){E.removePerson().then((function(){e.removeRandomPet()})).then((function(){E.getPeople().then((function(t){e.setState({people:t}),e.state.people[0]===e.state.userName&&(clearInterval(e.interval),e.fillQueue())})).catch((function(t){return e.setState({error:t})}))}))}),1e3)}},{key:"removeRandomPet",value:function(){var e=this,t=["cat","dog"],n=t[Math.floor(Math.random()*t.length)];E.dequeuePet(n).then((function(){E.getCat().then((function(t){e.setState({cat:t})})).catch((function(t){return e.setState({error:t})})),E.getDog().then((function(t){e.setState({dog:t})})).catch((function(t){return e.setState({error:t})}))}))}},{key:"fillQueue",value:function(){var e=this;this.interval=setInterval((function(){var t="Test Man ".concat(Math.floor(45*Math.random()));E.addPerson(t).then((function(){E.getPeople().then((function(t){e.setState({people:t}),5===t.length&&(clearInterval(e.interval),e.setState({atFront:!0,waiting:!1}))})).catch((function(t){return e.setState({error:t})}))}))}),1e3)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"AdoptPage"},o.a.createElement("div",{className:"pets"},this.state.cat&&o.a.createElement(m,{adoptButtonClicked:this.adoptButtonClicked,pet:this.state.cat,type:"cat",adoptable:this.state.atFront}),this.state.dog&&o.a.createElement(m,{adoptButtonClicked:this.adoptButtonClicked,pet:this.state.dog,type:"dog",adoptable:this.state.atFront})),this.state.atFront&&o.a.createElement("div",null,o.a.createElement("h3",null,"Now it's time to adopt!")),!1===this.state.inLine&&o.a.createElement("form",{className:"adopt-form",onSubmit:function(t){return e.handleFormSubmit(t)}},o.a.createElement("h4",null,"Want to adopt one of these cuties?"),o.a.createElement("label",{htmlFor:"name"},"Your name:"),o.a.createElement("input",{id:"name",type:"text",value:this.state.userName,onChange:function(t){return e.changeUserName(t)}}),o.a.createElement("button",{type:"submit"},"Submit")),this.state.people&&o.a.createElement(f,{people:this.state.people}))}}]),t}(a.Component)),g=n(7);n(29);function S(e){return o.a.createElement("div",{className:"LandingPage"},o.a.createElement("div",{className:"centered"},o.a.createElement("h2",null,"Welcome to Petful!"),o.a.createElement("h3",null,"Here's the process:")),o.a.createElement("div",null,o.a.createElement("ol",null,o.a.createElement("li",null,'Click "See Pets"'),o.a.createElement("li",null,"The next cat and the next dog will be shown"),o.a.createElement("li",null,"If interested, join the queue"),o.a.createElement("li",null,"When it is your turn, you will be able to select the next pet"))),o.a.createElement("div",{className:"centered"},o.a.createElement("h3",null,"Interested?"),o.a.createElement(g.b,{to:"/adopt"},o.a.createElement("button",null,"Adopt!"))))}n(35);var P=function(){return o.a.createElement("div",null,o.a.createElement("h1",null,"Petful"),o.a.createElement(u.c,null,o.a.createElement(u.a,{exact:!0,path:"/",component:S}),o.a.createElement(u.a,{exact:!0,path:"/adopt",component:v})))};c.a.render(o.a.createElement(g.a,null,o.a.createElement(o.a.StrictMode,null,o.a.createElement(P,null))),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.89dfc444.chunk.js.map